<% layout("/layouts/boilerplate") %> 

<style>

  .navbar .form-control,
  .navbar .btn {
    border-radius: 25px !important;
  }

  .new-container {
    max-width: 950px;
    margin: 30px auto 70px;
    animation: fadeUp 0.6s ease-in-out;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .new-card {
    background: white;
    border-radius: 26px;
    padding: 36px;
    box-shadow: 0 18px 45px rgba(0,0,0,0.08);
    border: 1px solid rgba(0,0,0,0.03);
    position: relative;
    overflow: hidden;
  }

  .new-card::before {
    content: "";
    position: absolute;
    top: -50px;
    right: -50px;
    width: 220px;
    height: 220px;
    background: radial-gradient(circle, rgba(254,66,77,0.18), transparent 70%);
    border-radius: 50%;
  }

  .new-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 22px;
  }

  .new-title {
    font-weight: 800;
    letter-spacing: 0.3px;
    margin: 0;
  }

  .new-subtitle {
    color: #666;
    font-size: 0.95rem;
  }

  .section-title {
    font-weight: 700;
    font-size: 1.05rem;
    margin-top: 26px;
    margin-bottom: 12px;
    color: #222;
  }

  .divider {
    border: none;
    height: 1px;
    background: linear-gradient(to right, #eee, #ddd, #eee);
    margin: 26px 0;
  }

  .form-label {
    font-weight: 600;
    font-size: 0.9rem;
    color: #333;
  }

 .new-card .form-control {
  border-radius: 16px;
  padding: 12px 14px;
  }

  .new-card .form-control:focus {
  border-color: #fe424d;
  box-shadow: 0 0 0 0.12rem rgba(254,66,77,0.18);
  }

  .image-box {
    background: #fafafa;
    padding: 18px;
    border-radius: 14px;
    border: 1px dashed rgba(0,0,0,0.12);
  }

  .preview-img {
    max-height: 260px;
    border-radius: 14px;
    margin-top: 12px;
  }

  .add-btn {
    background: linear-gradient(135deg, #fe424d, #ff5a60);
    border: none;
    width: 100%;
    font-size: 1.05rem;
    font-weight: 700;
    border-radius: 30px;
    padding: 12px 0;
    transition: all 0.25s ease;
  }

  .add-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(254,66,77,0.32);
  }

  .floating {
    position: relative;
  }

  .floating label {
    position: absolute;
    top: -8px;
    left: 12px;
    background: white;
    padding: 0 6px;
    font-size: 0.85rem;
    color: #666;
  }

  @media (max-width: 768px) {
    .new-card {
      padding: 22px;
    }
  }
</style>

<div class="new-container">
  <div class="new-card">

    <div class="new-header">
      <div>
        <h3 class="new-title">Create a New Listing</h3>
        <p class="new-subtitle">
          Make your place stand out for your guests âœ¨
        </p>
      </div>
      <i class="fa-regular fa-compass" style="font-size: 26px; color:#fe424d;"></i>
    </div>

    <form method="POST" action="/listings" novalidate 
          class="needs-validation" 
          enctype="multipart/form-data">

      <h6 class="section-title">Basic Details</h6>

      <div class="mb-3 floating">
        <label>Title</label>
        <input 
          name="listing[title]" 
          placeholder="Add a catchy title" 
          type="text" 
          class="form-control" 
          required 
        />
      </div>

      <div class="mb-3 floating">
        <label>Description</label>
        <textarea 
          name="listing[description]" 
          class="form-control" 
          rows="4"
          required>
        </textarea>
      </div>

      <hr class="divider" />

      <h6 class="section-title">Upload Image</h6>

      <div class="mb-3 image-box">
        <input 
          id="imageInput"
          name="listing[image]" 
          type="file" 
          class="form-control"
          accept="image/*"
          required
        />

        <div class="mt-3 text-center">
          <img 
            id="previewImg"
            src=""
            class="img-fluid preview-img d-none"
          />
        </div>
      </div>

      <hr class="divider" />

      <h6 class="section-title">Pricing & Location</h6>

      <div class="row">
        <div class="mb-3 col-md-4 floating">
          <label>Price (per night)</label>
          <input 
            name="listing[price]" 
            placeholder="eg, 1200" 
            type="number" 
            class="form-control" 
            required 
          />
        </div>

        <div class="mb-3 col-md-8 floating">
          <label>Country</label>
          <select 
            name="listing[country]" 
            id="country" 
            class="form-control" 
            required
          >
           <option value="">Select Country</option>
           <option value="India">India</option>
           <option value="United States">United States</option>
           <option value="United Kingdom">United Kingdom</option>
           <option value="Canada">Canada</option>
           <option value="Australia">Australia</option>
           <option value="Germany">Germany</option>
           <option value="France">France</option>
           <option value="Japan">Japan</option>
           <option value="China">China</option>
           <option value="Brazil">Brazil</option>
           <option value="Russia">Russia</option>
           <option value="Italy">Italy</option>
           <option value="Spain">Spain</option>
           <option value="Mexico">Mexico</option>
           <option value="South Africa">South Africa</option>
         </select>
        </div>
      </div>

      <div class="mb-3 floating">
        <label>Location</label>
        <input 
          name="listing[location]" 
          placeholder="eg, New York"
          type="text" 
          class="form-control" 
          required 
        />
      </div>

      <button class="btn add-btn text-white mt-3">Add Listing</button>

    </form>
  </div>
</div>

<script>

document.getElementById("imageInput").addEventListener("change", function(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.getElementById("previewImg");
        img.src = e.target.result;
        img.classList.remove("d-none");
      };
      reader.readAsDataURL(file);
    }
  });
</script>
